<html>
  <head>
    <meta charset="UTF-8" />
    <title>Graphique des Commits</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  </head>
  <body>
    <h2>Graphique des Commits par Minute</h2>
    <div id="chart_div"></div>
    <script>
      google.charts.load('current', { packages: ['corechart', 'bar'] });
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        // Préparer les données pour Google Charts
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Minute');
        data.addColumn('number', 'Nombre de Commits');

        // Insérer les données passées depuis Flask dans le graphique
        var commitsData = {{ data | tojson }};
        commitsData.forEach(function(entry) {
          data.addRow([entry[0], entry[1]]);
        });

        // Configurer le graphique
        var options = {
          title: 'Nombre de Commits par Minute',
          chartArea: { width: '50%' },
          hAxis: {
            title: 'Minute',
            minValue: 0
          },
          vAxis: {
            title: 'Commits'
          }
        };

        // Créer et afficher le graphique
        var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </body>
</html>
